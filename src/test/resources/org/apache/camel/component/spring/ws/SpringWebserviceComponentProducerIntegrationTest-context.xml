<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
	http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">

	<!-- ============================== -->
	<!--          Camel routes          -->
	<!-- ============================== -->
	<camelContext xmlns="http://camel.apache.org/schema/spring" trace="true">
		<route>
			<from uri="springws:rootqname:{http://www.stockquotes.edu/}SomeElement?endpointMapping=#endpointMapping" />
			<to uri="mock:testRootQNameDummy" />
		</route>
		<route>
			<from uri="springws:rootqname:{http://www.stockquotes.edu/}GetQuote?endpointMapping=#endpointMapping" />
			<to uri="mock:testRootQName" />
		</route>
		<route>
			<from uri="springws:soapaction:http://www.stockquotes.edu/GetQuote?endpointMapping=#endpointMapping" />
			<to uri="mock:testSoapAction" />
		</route>
		<route>
			<from uri="springws:uri:http://localhost/stockquote2?endpointMapping=#endpointMapping" />
			<to uri="mock:testUri" />
		</route>
		<route>
			<from uri="springws:xpathresult:GRABME?expression=//GetQuote&amp;endpointMapping=#endpointMapping" />
			<to uri="mock:testXPath" />
		</route>
		<route>
			<from uri="springws:beanname:QuoteEndpointDispatcher" />
			<to uri="mock:testBeanName" />
		</route>
	</camelContext>
	
	<bean id="endpointMapping" class="org.apache.camel.component.spring.ws.bean.CamelEndpointMapping" />
	
	<bean id="regularEndpointMapping" class="org.springframework.ws.server.endpoint.mapping.PayloadRootQNameEndpointMapping">
        <property name="mappings">
            <props>
                <prop key="{http://www.stockquotes.edu/}GetFuture">FutureEndpointDispatcher</prop>
                <prop key="{http://www.stockquotes.edu/}GetQuote">QuoteEndpointDispatcher</prop>
            </props>
        </property>
    </bean>

	<bean id="QuoteEndpointDispatcher" class="org.apache.camel.component.spring.ws.bean.CamelEndpointDispatcher" />
	
	<bean id="FutureEndpointDispatcher" class="org.apache.camel.component.spring.ws.bean.CamelEndpointDispatcher" />
	
	<bean id="responseProcessor" class="org.apache.camel.component.spring.ws.StockQuoteResponseProcessor" />
		
	<!-- ============================== -->
	<!--   Supporting Spring-WS beans   -->
	<!-- ============================== -->
	<bean id="webServiceTemplate" class="org.springframework.ws.client.core.WebServiceTemplate">
		<property name="defaultUri" value="http://localhost" />
		<property name="messageSender">
			<bean class="net.javacrumbs.springws.test.helper.InMemoryWebServiceMessageSender" />
		</property>
	</bean>

</beans>