<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
	http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">

	<camelContext xmlns="http://camel.apache.org/schema/spring">
		<route>
			<from uri="springws:rootqname:{http://www.webserviceX.NET/}SomeElement?endpointMapping=#endpointMapping" />
			<to uri="mock:testRootQNameDummy" />
		</route>
		<route>
			<from uri="springws:rootqname:{http://www.webserviceX.NET/}GetQuote?endpointMapping=#endpointMapping" />
			<to uri="mock:testRootQName" />
		</route>
<!--		<route>-->
<!--			<from uri="springws:soapaction:http://www.webserviceX.NET/GetQuote?endpointMapping=#endpointMapping" />-->
<!--			<to uri="mock:testSoapAction" />-->
<!--		</route>-->
		<route>
			<from uri="springws:soapaction:http://www.webserviceX.NET/GetQuote?endpointMapping=#endpointMapping" />
			<to uri="file:///org/apache/camel/component/spring/ws/stockquote-response.xml" pattern="InOut"/>
		</route>
		<route>
			<from uri="springws:uri:/stockquote2?endpointMapping=#endpointMapping" />
			<to uri="mock:testUri" />
		</route>
		<route>
			<from uri="springws:xpath:///GetQuote?endpointMapping=#endpointMapping" />
			<to uri="mock:testXPath" />
		</route>
	</camelContext>
	
	<bean id="endpointMapping" class="org.apache.camel.component.spring.ws.bean.CamelEndpointMapping" />
		
	<!-- ============================== -->
	<!--   Supporting Spring-WS beans   -->
	<!-- ============================== -->
    <bean id="httpServer" class="org.springframework.remoting.support.SimpleHttpServerFactoryBean">
        <property name="contexts">
            <map>
                <entry key="/stockquote" value-ref="soapHandler"/>
                <entry key="/stockquote2" value-ref="soapHandler"/>
            </map>
        </property>
    </bean>

    <bean id="soapHandler" class="org.springframework.ws.transport.http.WebServiceMessageReceiverHttpHandler">
        <property name="messageFactory" ref="messageFactory"/>
        <property name="messageReceiver" ref="messageReceiver"/>
    </bean>
    
	<bean id="messageFactory" class="org.springframework.ws.soap.saaj.SaajSoapMessageFactory" />
	
	<bean id="messageReceiver" class="org.springframework.ws.soap.server.SoapMessageDispatcher">
        <property name="endpointMappings" ref="endpointMapping"/>
    </bean>

</beans>